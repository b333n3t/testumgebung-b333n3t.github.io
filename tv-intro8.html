<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="robots" content="noindex,follow" />
  <link rel="canonical" href="https://www.b3nn3t.com/" />

  <title>TV-Intro – b3nn3t | Intro-Annimation &amp; Visuals</title>
  <meta name="description" content="Das offizielle Intro von b3nn3t – Sound, Atmosphäre und visuelle Identität. Ein kurzer Einblick in die Welt hinter dem Intro." />

  <script type="speculationrules">
  {
    "prefetch": [{ "source": "document", "urls": ["index.html"] }],
    "prerender": [{ "source": "document", "urls": ["index.html?nointro=1"] }]
  }
  </script>

  <style>
    :root { --fade-ms: 1000ms; --bg:#930010; }

    html,body{
      margin:0;height:100%;
      background:var(--bg);
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    canvas#c{
      position:fixed; inset:0;
      width:100vw; height:100vh;
      display:block;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
      opacity:0;
      transition:opacity var(--fade-ms) ease;
      z-index:1;
    }
    body.ready canvas#c{opacity:1;}
    body.fadeout canvas#c{opacity:0;}

    .skip{
      position:fixed; top:14px; right:14px; z-index:10;
      background:#fff; color:#000; border:0; border-radius:999px;
      padding:.45rem .8rem; font-weight:700; cursor:pointer;
    }
    .skip:focus-visible{outline:2px solid #fff; outline-offset:2px;}

    .loaderWrap{
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      opacity:0;
      transition:opacity var(--fade-ms) ease;
      z-index:5;
      pointer-events:none;
    }
    body.ready .loaderWrap{opacity:1;}
    body.fadeout .loaderWrap{opacity:0;}

    .loader{
      width:min(720px,78vw);
      padding:18px 18px 16px;
      box-sizing:border-box;
    }

    .barFrame{
      width:100%; height:16px;
      border:2px solid #fff;
      border-radius:0;
      padding:2px;
      box-sizing:border-box;
      box-shadow:
        0 0 0 1px rgba(255,255,255,0.6),
        inset 0 0 0 1px rgba(0,0,0,0.6);
    }

    .bar{
      height:100%;
      width:0%;
      border-radius:0;
      background:
        repeating-linear-gradient(
          90deg,
          #fff 0px,
          #fff 6px,
          rgba(255,255,255,0.65) 6px,
          rgba(255,255,255,0.65) 8px
        );
    }

    .hint{
      margin-top:10px;
      color:rgba(255,255,255,.9);
      font-size:14px;
      letter-spacing:.2px;
      text-align:center;
      user-select:none;
      text-shadow: 0 1px 0 rgba(0,0,0,0.35);
    }

    @media (prefers-reduced-motion: reduce){
      body{animation:none !important;}
      canvas#c,.loaderWrap{transition:none;}
    }
  </style>

  <noscript>
    <meta http-equiv="refresh" content="0; url=index.html?nointro=1">
    <style>
      body{display:flex;align-items:center;justify-content:center;color:#fff;}
      a{color:#fff;text-decoration:underline;}
    </style>
    <p>Weiter zur <a href="index.html?nointro=1">Startseite</a>…</p>
  </noscript>
</head>
<body>

<main role="="main">
  <button class="skip" type="button" aria-label="Intro überspringen">Skip</button>
  <canvas id="c" aria-hidden="true"></canvas>

  <div class="loaderWrap" aria-hidden="true">
    <div class="loader">
      <div class="barFrame"><div class="bar" id="bar"></div></div>
      <div class="hint">Loading…</div>
    </div>
  </div>

  <div aria-live="polite" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
    Intro läuft. Du kannst „Skip“ drücken, um direkt zur Startseite zu wechseln.
  </div>
</main>

<script>
/* ================== Redirect Ziel ================== */
const INTRO_RETURN_URL =
  (sessionStorage.getItem("introReturn") || "index.html") +
  (location.search.includes('nointro=1') ? "" : (location.search ? "&" : "?") + "nointro=1");

/* ================== PRELOAD bleibt drin ================== */
const preloadImages = [
  "assets/index/bennet_index1.avif","assets/index/bennet_index1.webp",
  "assets/index/bennet_index2.avif","assets/index/bennet_index2.webp",
  "assets/index/bennet_index3.avif","assets/index/bennet_index3.webp",
  "assets/gesehen/insta1.webp","assets/gesehen/insta2.webp","assets/gesehen/insta3.webp","assets/gesehen/insta4.webp",
  "assets/gesehen/reel1.avif","assets/gesehen/reel2.avif","assets/gesehen/reel3.avif","assets/gesehen/reel4.avif",
  "assets/gesehen/reel5.avif","assets/gesehen/reel6.avif","assets/gesehen/reel7.avif",
  "assets/gesehen/instagram_poster.jpg",
  "https://img.youtube.com/vi/ZSaj_FuqPN8/hqdefault.jpg",
  "https://img.youtube.com/vi/DMNl40Tip1w/hqdefault.jpg",
  "https://img.youtube.com/vi/K5pKG0Smdfc/hqdefault.jpg",
  "https://img.youtube.com/vi/4I9vlcGvFGQ/hqdefault.jpg",
  "https://img.youtube.com/vi/w0pNdnlb96M/hqdefault.jpg",
  "https://img.youtube.com/vi/rV1U891RKLo/hqdefault.jpg",
  "https://img.youtube.com/vi/fq8zhAQMam0/hqdefault.jpg"
];
const preloadVideos = [ "assets/gesehen/B3NN3T.mp4" ];

function preloadAllImages(urls){
  urls.forEach(url=>{
    const img=new Image();
    img.referrerPolicy="no-referrer";
    img.src=url;
  });
}
function preloadAllVideos(urls){
  urls.forEach(url=>{
    const v=document.createElement('video');
    v.preload='auto';
    v.muted=true;
    v.src=url;
    v.load();
  });
}
if(!window._preloaded){
  window._preloaded=true;
  preloadAllImages(preloadImages);
  preloadAllVideos(preloadVideos);
}

/* ================== Canvas Setup ================== */
const c = document.getElementById('c');
const ctx = c.getContext('2d');

let W=0,H=0,DPR=1;

function resize(){
  DPR = Math.max(1, Math.floor(window.devicePixelRatio || 1));
  W = c.width  = Math.floor(innerWidth * DPR);
  H = c.height = Math.floor(innerHeight * DPR);
  c.style.width  = innerWidth + 'px';
  c.style.height = innerHeight + 'px';
  ctx.imageSmoothingEnabled = false;
}
addEventListener('resize', resize);
resize();

/* ================== Chalk / Scanline Style ==================
   - Linien bestehen aus vielen kleinen Segmenten + Körnung
   - keine starken Wellen, eher “trocken” wie Kreide auf Glas
   - stabil: RNG aus seed, kein Frame-flimmern
*/
const snap = (v)=>Math.round(v);
const clamp01 = (t)=>Math.max(0,Math.min(1,t));
function hash01(n){ const x=Math.sin(n*127.1)*43758.5453123; return x-Math.floor(x); }

function rngFrom(seed){
  let s=(seed>>>0)||1;
  return function(){
    s^=s<<13; s>>>=0;
    s^=s>>>17; s>>>=0;
    s^=s<<5;  s>>>=0;
    return (s>>>0)/4294967296;
  };
}

function chalkDashedLine(x1,y1,x2,y2,seed,alpha){
  const r = rngFrom(seed);
  const dx=x2-x1, dy=y2-y1;
  const len=Math.hypot(dx,dy)||1;
  const ux=dx/len, uy=dy/len;
  const nx=-uy, ny=ux;

  // Segment-Länge + Lücke (in Pixeln)
  const segLen = (7 + r()*9) * DPR;     // 7..16
  const gapLen = (3 + r()*6) * DPR;     // 3..9

  // “Trockenheit” / Kreide-Rand
  const jitter = (0.25 + r()*0.55) * DPR;

  // Grundstrich (dünn)
  const baseW = Math.max(0.7, 0.85*DPR);

  ctx.save();
  ctx.globalAlpha = alpha;

  // Mehrfach-Pass -> kreidig (aber nicht dick)
  for(let pass=0; pass<2; pass++){
    const passA = pass===0 ? 1.0 : 0.55;
    ctx.globalAlpha = alpha * passA;

    ctx.strokeStyle = pass===0 ? 'rgba(255,255,255,0.58)' : 'rgba(255,255,255,0.40)';
    ctx.lineWidth   = pass===0 ? baseW : Math.max(0.6, baseW*0.85);
    ctx.lineCap='round';

    let t=0;
    while(t < len){
      const L = Math.min(segLen, len - t);
      const s0 = t;
      const s1 = t + L;

      const ox = (r()-0.5) * jitter + (pass? (r()-0.5)*0.35*DPR : 0);
      const oy = (r()-0.5) * jitter + (pass? (r()-0.5)*0.35*DPR : 0);

      const ax = x1 + ux*s0 + nx*ox;
      const ay = y1 + uy*s0 + ny*oy;
      const bx = x1 + ux*s1 + nx*ox;
      const by = y1 + uy*s1 + ny*oy;

      ctx.beginPath();
      ctx.moveTo(snap(ax), snap(ay));
      ctx.lineTo(snap(bx), snap(by));
      ctx.stroke();

      // “Kreide-Krümel” am Segment
      const crumbs = 1 + Math.floor(r()*3);
      ctx.fillStyle = 'rgba(255,255,255,0.16)';
      for(let k=0;k<crumbs;k++){
        const tt = r();
        const px = ax + (bx-ax)*tt + (r()-0.5)*2.2*DPR;
        const py = ay + (by-ay)*tt + (r()-0.5)*2.2*DPR;
        const s  = Math.max(1, Math.floor((0.9 + r()*1.8)*DPR));
        ctx.fillRect(snap(px), snap(py), s, s);
      }

      t += segLen + gapLen;
    }
  }

  ctx.restore();
}

/* ================== Tunnel-Grid (Chalk) ================== */
function drawTunnelGrid(now, reveal01){
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,W,H);
  ctx.fillStyle = '#930010';
  ctx.fillRect(0,0,W,H);

  const outer = [
    {x:0, y:0}, {x:W, y:0}, {x:W, y:H}, {x:0, y:H}
  ];

  const cx = W*0.5, cy = H*0.5;
  const innerW = W*0.44;
  const innerH = H*0.32;
  const inner = [
    {x:cx - innerW/2, y:cy - innerH/2},
    {x:cx + innerW/2, y:cy - innerH/2},
    {x:cx + innerW/2, y:cy + innerH/2},
    {x:cx - innerW/2, y:cy + innerH/2}
  ];

  const RINGS = 34;
  const RAD   = 26;

  const ringCount = Math.max(1, Math.floor(reveal01 * RINGS));
  const radCount  = Math.max(2, Math.floor(reveal01 * RAD));

  const speed = 0.00038;
  const phase = (now*speed) % 1;

  // Radials
  for(let i=0;i<=radCount;i++){
    const t = i/radCount;

    const A = { x: outer[0].x + (outer[1].x-outer[0].x)*t, y: outer[0].y };
    const B = { x: inner[0].x + (inner[1].x-inner[0].x)*t, y: inner[0].y };
    chalkDashedLine(A.x,A.y,B.x,B.y, 10+i*0.19, 0.62);

    const C = { x: outer[3].x + (outer[2].x-outer[3].x)*t, y: outer[3].y };
    const D = { x: inner[3].x + (inner[2].x-inner[3].x)*t, y: inner[3].y };
    chalkDashedLine(C.x,C.y,D.x,D.y, 20+i*0.19, 0.62);
  }
  for(let i=0;i<=radCount;i++){
    const t = i/radCount;

    const A = { x: outer[0].x, y: outer[0].y + (outer[3].y-outer[0].y)*t };
    const B = { x: inner[0].x, y: inner[0].y + (inner[3].y-inner[0].y)*t };
    chalkDashedLine(A.x,A.y,B.x,B.y, 30+i*0.19, 0.62);

    const C = { x: outer[1].x, y: outer[1].y + (outer[2].y-outer[1].y)*t };
    const D = { x: inner[1].x, y: inner[1].y + (inner[2].y-inner[1].y)*t };
    chalkDashedLine(C.x,C.y,D.x,D.y, 40+i*0.19, 0.62);
  }

  // Rings (Tiefe)
  for(let i=0;i<ringCount;i++){
    const u = (i/(RINGS-1));
    let z = u*u;
    z = (z + phase*0.22) % 1;
    z = z*z;

    const q0 = { x: outer[0].x + (inner[0].x-outer[0].x)*z, y: outer[0].y + (inner[0].y-outer[0].y)*z };
    const q1 = { x: outer[1].x + (inner[1].x-outer[1].x)*z, y: outer[1].y + (inner[1].y-outer[1].y)*z };
    const q2 = { x: outer[2].x + (inner[2].x-outer[2].x)*z, y: outer[2].y + (inner[2].y-outer[2].y)*z };
    const q3 = { x: outer[3].x + (inner[3].x-outer[3].x)*z, y: outer[3].y + (inner[3].y-outer[3].y)*z };

    const front = (1 - z);
    const alpha = 0.10 + 0.26*front;

    chalkDashedLine(q0.x,q0.y,q1.x,q1.y, 100+i*0.31, alpha);
    chalkDashedLine(q1.x,q1.y,q2.x,q2.y, 200+i*0.31, alpha);
    chalkDashedLine(q2.x,q2.y,q3.x,q3.y, 300+i*0.31, alpha);
    chalkDashedLine(q3.x,q3.y,q0.x,q0.y, 400+i*0.31, alpha);
  }

  // Portal Outline etwas kräftiger
  chalkDashedLine(inner[0].x,inner[0].y,inner[1].x,inner[1].y, 900, 0.78);
  chalkDashedLine(inner[1].x,inner[1].y,inner[2].x,inner[2].y, 901, 0.78);
  chalkDashedLine(inner[2].x,inner[2].y,inner[3].x,inner[3].y, 902, 0.78);
  chalkDashedLine(inner[3].x,inner[3].y,inner[0].x,inner[0].y, 903, 0.78);
}

/* ================== Loader Timing ================== */
const START_DELAY_MS = 1000;
const INTRO_MS = 3500;
const FADEOUT_MS = 1700;
const EXTRA_MS = 300;

function startTransition(){
  sessionStorage.setItem("introPlayed","1");
  document.body.classList.add('fadeout');
  setTimeout(()=>{ window.location.href = INTRO_RETURN_URL; }, FADEOUT_MS + EXTRA_MS);
}

function startProgressAndTunnel(){
  const bar = document.getElementById('bar');
  const start = performance.now();

  function frame(now){
    const t = (now - start) / INTRO_MS;
    const clamped = Math.max(0, Math.min(1, t));
    const reveal = Math.min(1, clamped * 1.20);

    drawTunnelGrid(now, reveal);

    const steps = 32;
    const stepped = Math.floor(clamped * steps) / steps;
    bar.style.width = (stepped * 100).toFixed(2) + "%";

    if(clamped >= 1){
      bar.style.width = "100%";
      startTransition();
      return;
    }
    requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

/* ================== Skip & A11y ================== */
(function setupSkipAndA11y(){
  const skipBtn = document.querySelector('.skip');
  function goNow(){
    try { sessionStorage.setItem("introPlayed","1"); } catch(e){}
    document.body.classList.add('fadeout');
    setTimeout(()=>location.replace(INTRO_RETURN_URL), 250);
  }
  if (skipBtn) skipBtn.addEventListener('click', goNow);

  try {
    if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      goNow();
      return;
    }
  } catch(e){}
})();

/* ================== Start ================== */
setTimeout(() => {
  document.body.classList.add('ready');
  startProgressAndTunnel();
}, START_DELAY_MS);
</script>
</body>
</html>
