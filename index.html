<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Start — b3nn3t</title>
  <meta name="description" content="Start — b3nn3t" />
  <link rel="icon" href="favicon.svg" type="image/svg+xml">

  <!-- 🔁 Intro-Redirect (nur einmal pro Session) -->
  <script>
    (function () {
      try {
        const played     = sessionStorage.getItem("introPlayed") === "1";
        const fromIntro  = document.referrer && /tv-intro\.html(?:$|[?#])/.test(document.referrer);
        const bypass     = location.search.includes("nointro=1");
        if (!played && !fromIntro && !bypass) {
          const returnUrl = (location.pathname || "index.html") +
                            (location.search || "") +
                            (location.hash || "");
          sessionStorage.setItem("introReturn", returnUrl);
          location.replace("tv-intro.html");
        }
      } catch (e) {}
    })();
  </script>

  <!-- Externe Styles -->
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="styles_nav_arrows.css" />
  <link rel="stylesheet" href="swipe-helper.css" />
</head>

<body ontouchstart="">
  <header class="header">
    <a class="brand" href="index.html" aria-label="b3nn3t Home">
      <img alt="" src="favicon.svg"><strong>b3nn3t</strong>
    </a>
  </header>

  <div id="page-glass" aria-hidden="true">
    <div class="glass-fade"></div>
    <div class="glass-solid"></div>
  </div>

  <button class="hamburger" aria-label="Menü öffnen" aria-expanded="false" aria-controls="site-menu">
    <span></span><span></span><span></span>
  </button>
  <div id="menu-overlay" class="menu-overlay" hidden></div>

  <nav id="site-menu" class="site-menu" aria-hidden="true">
    <ul>
      <li><a href="ueber-mich.html">über mich</a></li>
      <li><a href="diskografie.html">diskografie</a></li>
      <li><a href="kontakt.html">kontakt</a></li>
      <li><a href="aktuell.html">aktuell</a></li>
      <li><a href="gesehen.html">gesehen</a></li>
      <li><a href="plattformen.html">plattformen</a></li>
      <li class="sep"><a href="impressum.html">Impressum / Datenschutz</a></li>
    </ul>
  </nav>

  <main class="main">
    <div class="content-offset">
      <h1>moin und willkommen</h1>
      <p>bei <strong>b3nn3t</strong> – bock auf browsen... dann los</p>

      <section class="grid" aria-label="Seitenübersicht">
        <a class="card" href="ueber-mich.html">über mich<small>Bio & Einblicke</small></a>
        <figure class="panel-photo">
          <img src="assets/bennet_index1.jpg" alt="b3nn3t – Bennet">
        </figure>

        <a class="card" href="diskografie.html">diskografie<small>Releases & Projekte</small></a>
        <figure class="panel-photo">
          <img src="assets/bennet_index2.jpg" alt="b3nn3t – Bennet Studio">
        </figure>

        <a class="card" href="kontakt.html">kontakt<small>Booking & Mail</small></a>
        <a class="card" href="aktuell.html">aktuell<small>News & Termine</small></a>
        <figure class="panel-photo">
          <img src="assets/bennet_index3.jpg" alt="b3nn3t – Bennet Aktuell">
        </figure>

        <a class="card" href="intro.html">gesehen<small>Inspiration & Notizen</small></a>
        <a class="card" href="plattformen.html">plattformen<small>Social & Streaming</small></a>

        <br><br><br>
        <div class="footer-inline">
          © b3nn3t · <a href="impressum.html">Impressum / Datenschutz</a>
        </div>
      </section>
    </div>
  </main>

  <div class="scroll-cue" aria-hidden="true">
    <svg viewBox="0 0 24 24" fill="none" stroke="#000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
  </div>

  <script src="script.js"></script>
  <script src="swipe-nav.js?v=12" defer></script>

  <script>
    const cue = document.querySelector('.scroll-cue');
    const scroller = document.querySelector('.main');
    window.addEventListener('load', () => cue.classList.add('visible'));
    scroller.addEventListener('scroll', () => {
      cue.classList.toggle('hidden', scroller.scrollTop > 50);
    }, {passive:true});
  </script>

  <script>
    (function () {
      const glass = document.getElementById('page-glass');
      const panel = document.querySelector('.main');
      if (!glass || !panel) return;
      function positionGlass() {
        const r = panel.getBoundingClientRect();
        glass.style.left  = r.left + 'px';
        glass.style.right = (window.innerWidth - r.right) + 'px';
        const cs = getComputedStyle(panel);
        glass.style.borderRadius = cs.borderRadius || '12px';
      }
      window.addEventListener('load', positionGlass);
      window.addEventListener('resize', positionGlass);
      window.addEventListener('scroll', positionGlass, { passive: true });
      let raf; function tick(){ positionGlass(); raf = requestAnimationFrame(tick); }
      tick(); setTimeout(()=>cancelAnimationFrame(raf), 800);
    })();
  </script>

  <!-- ✅ Scroll-Peek Script -->
  <script>
  (function(){
    const scroller = document.querySelector('.main');
    if (!scroller) return;

    const grid = document.querySelector('.grid');
    const photos = Array.from(grid.querySelectorAll('.panel-photo'));
    const [p1,p2,p3] = photos;

    const pairs = [
      {card:grid.querySelector('a[href$="ueber-mich.html"]'),img:p1,dir:+1},
      {card:grid.querySelector('a[href$="diskografie.html"]'),img:p2,dir:+1},
      {card:grid.querySelector('a[href$="kontakt.html"]'),img:p3,dir:+1},
      {card:grid.querySelector('a[href$="aktuell.html"]'),img:p3,dir:+1},
      {card:grid.querySelector('a[href$="intro.html"]'),img:p3,dir:-1}
    ].filter(x=>x.card&&x.img);

    const ease=t=>t*t*(3-2*t);
    function progress(mid,vh){const s=vh*0.1,e=vh*0.9;let t=(e-mid)/(e-s);return Math.max(0,Math.min(1,t));}

    function update(){
      const vRect=scroller.getBoundingClientRect();
      const vh=scroller.clientHeight;
      for(const {card,img,dir} of pairs){
        const r=img.getBoundingClientRect();
        const mid=(r.top - vRect.top)+r.height/2;
        const t=ease(progress(mid,vh));
        const move=r.height*0.1*t*dir;
        card.style.setProperty('--peekY',move.toFixed(2)+'px');
      }
    }

    scroller.addEventListener('scroll',update,{passive:true});
    window.addEventListener('resize',update);
    document.querySelectorAll('.panel-photo img').forEach(img=>{
      if(!img.complete)img.addEventListener('load',update,{once:true});
    });
    (function tick(){update();requestAnimationFrame(tick);})();
  })();
  </script>
</body>
</html>
