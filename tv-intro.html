<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="robots" content="noindex,follow" />
  <link rel="canonical" href="https://www.b3nn3t.com/" />

  <title>TV-Intro â€“ b3nn3t | Intro-Annimation &amp; Visuals</title>
  <meta name="description" content="Das offizielle Intro von b3nn3t â€“ Sound, AtmosphÃ¤re und visuelle IdentitÃ¤t. Ein kurzer Einblick in die Welt hinter dem Intro." />

  <script type="speculationrules">
  {
    "prefetch": [{ "source": "document", "urls": ["index.html"] }],
    "prerender": [{ "source": "document", "urls": ["index.html?nointro=1"] }]
  }
  </script>

  <style>
    :root {
      --fade-ms: 1000ms;
      --bg: #930010;
    }

    html,body {
      margin:0;
      height:100%;
      background:var(--bg);
      overflow:hidden;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* âœ… Canvas jetzt sichtbar, aber nur fÃ¼r das Grid */
    canvas#c{
      position:fixed;
      inset:0;
      display:block;
      width:100vw;
      height:100vh;
      image-rendering:pixelated;
      image-rendering:crisp-edges;
      opacity:0;
      transition: opacity var(--fade-ms) ease;
      z-index:1;
    }
    body.ready canvas#c  { opacity:1; }
    body.fadeout canvas#c{ opacity:0; }

    /* Skip */
    .skip {
      position:fixed; top:14px; right:14px; z-index:10;
      background:#fff; color:#000; border:0; border-radius:999px;
      padding:.45rem .8rem; font-weight:700; cursor:pointer;
    }
    .skip:focus-visible { outline:2px solid #fff; outline-offset:2px; }

    /* Loader */
    .loaderWrap{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      opacity:0;
      transition: opacity var(--fade-ms) ease;
      z-index:5;
      pointer-events:none;
    }
    body.ready .loaderWrap{ opacity:1; }
    body.fadeout .loaderWrap{ opacity:0; }

    .loader{
      width:min(520px, 78vw);
      padding:18px 18px 16px;
      box-sizing:border-box;
    }

    /* âœ… 80s / eckig / CRT-Frame */
    .barFrame{
      width:100%;
      height:16px;
      border:2px solid #fff;
      border-radius:0;
      padding:2px;
      box-sizing:border-box;
      box-shadow:
        0 0 0 1px rgba(255,255,255,0.6),
        inset 0 0 0 1px rgba(0,0,0,0.6);
    }

    /* âœ… 80s Pixel-Fill */
    .bar{
      height:100%;
      width:0%;
      border-radius:0;
      background:
        repeating-linear-gradient(
          90deg,
          #fff 0px,
          #fff 6px,
          rgba(255,255,255,0.65) 6px,
          rgba(255,255,255,0.65) 8px
        );
    }

    .hint{
      margin-top:10px;
      color:rgba(255,255,255,.85);
      font-size:14px;
      letter-spacing:.2px;
      text-align:center;
      user-select:none;
    }

    @media (prefers-reduced-motion: reduce) {
      body { animation:none !important; }
      canvas#c, .loaderWrap { transition:none; }
    }
  </style>

  <noscript>
    <meta http-equiv="refresh" content="0; url=index.html?nointro=1">
    <style>
      body { display:flex; align-items:center; justify-content:center; color:#fff; }
      a { color:#fff; text-decoration:underline; }
    </style>
    <p>Weiter zur <a href="index.html?nointro=1">Startseite</a>â€¦</p>
  </noscript>
</head>
<body>

  <main role="main">
    <button class="skip" type="button" aria-label="Intro Ã¼berspringen">Skip</button>

    <canvas id="c" aria-hidden="true"></canvas>

    <div class="loaderWrap" aria-hidden="true">
      <div class="loader">
        <div class="barFrame">
          <div class="bar" id="bar"></div>
        </div>
        <div class="hint">Loadingâ€¦</div>
      </div>
    </div>

    <div aria-live="polite" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">
      Intro lÃ¤uft. Du kannst â€žSkipâ€œ drÃ¼cken, um direkt zur Startseite zu wechseln.
    </div>
  </main>

<script>
/* ================== Redirect Ziel (wie vorher) ================== */
const INTRO_RETURN_URL =
  (sessionStorage.getItem("introReturn") || "index.html") +
  (location.search.includes('nointro=1') ? "" : (location.search ? "&" : "?") + "nointro=1");

/* ================== PRELOAD bleibt drin ================== */
const preloadImages = [
  "assets/index/bennet_index1.avif",
  "assets/index/bennet_index1.webp",
  "assets/index/bennet_index2.avif",
  "assets/index/bennet_index2.webp",
  "assets/index/bennet_index3.avif",
  "assets/index/bennet_index3.webp",

  "assets/gesehen/insta1.webp",
  "assets/gesehen/insta2.webp",
  "assets/gesehen/insta3.webp",
  "assets/gesehen/insta4.webp",

  "assets/gesehen/reel1.avif",
  "assets/gesehen/reel2.avif",
  "assets/gesehen/reel3.avif",
  "assets/gesehen/reel4.avif",
  "assets/gesehen/reel5.avif",
  "assets/gesehen/reel6.avif",
  "assets/gesehen/reel7.avif",
  "assets/gesehen/instagram_poster.jpg",
  "https://img.youtube.com/vi/ZSaj_FuqPN8/hqdefault.jpg",
  "https://img.youtube.com/vi/DMNl40Tip1w/hqdefault.jpg",
  "https://img.youtube.com/vi/K5pKG0Smdfc/hqdefault.jpg",
  "https://img.youtube.com/vi/4I9vlcGvFGQ/hqdefault.jpg",
  "https://img.youtube.com/vi/w0pNdnlb96M/hqdefault.jpg",
  "https://img.youtube.com/vi/rV1U891RKLo/hqdefault.jpg",
  "https://img.youtube.com/vi/fq8zhAQMam0/hqdefault.jpg"
];
const preloadVideos = [ "assets/gesehen/B3NN3T.mp4" ];

function preloadAllImages(urls){
  urls.forEach(url=>{
    const img = new Image();
    img.referrerPolicy = "no-referrer";
    img.src = url;
  });
}
function preloadAllVideos(urls){
  urls.forEach(url=>{
    const v = document.createElement('video');
    v.preload = 'auto';
    v.muted = true;
    v.src = url;
    v.load();
  });
}

/* ðŸ”¥ Preload sofort beim Start */
if(!window._preloaded){
  window._preloaded=true;
  preloadAllImages(preloadImages);
  preloadAllVideos(preloadVideos);
}

/* ================== Canvas Grid ================== */
const c = document.getElementById('c');
const ctx = c.getContext('2d');
let W=0,H=0,DPR=1;

function resize(){
  DPR=Math.max(1,Math.floor(window.devicePixelRatio||1));
  W=c.width=Math.floor(innerWidth*DPR);
  H=c.height=Math.floor(innerHeight*DPR);
  c.style.width=innerWidth+'px';
  c.style.height=innerHeight+'px';
  ctx.imageSmoothingEnabled=false;
}
addEventListener('resize', resize);
resize();

function drawGrid(now){
  // Hintergrund fÃ¼llen (identisch zum Body)
  ctx.clearRect(0,0,W,H);
  ctx.fillStyle = '#930010';
  ctx.fillRect(0,0,W,H);

  // Perspektive
  const horizon = Math.floor(H * 0.28);
  const vpX = Math.floor(W * 0.5);
  const vpY = horizon;

  // â€žTunnelâ€œ-Rahmen: oben schmaler, unten breiter
  const topMarginX = W * 0.18;
  const bottomMarginX = W * 0.06;

  const topLeftX = topMarginX;
  const topRightX = W - topMarginX;
  const botLeftX = bottomMarginX;
  const botRightX = W - bottomMarginX;

  // Animation: grid lÃ¤uft nach vorne
  const speed = 0.00055;          // kleiner = langsamer
  const phase = (now * speed) % 1;

  // Linienstyle (dunkler als Hintergrund, 80s)
  ctx.strokeStyle = 'rgba(0,0,0,0.35)';
  ctx.lineWidth = Math.max(1, Math.floor(DPR)); // crisp

  // Vertikale (konvergierende) Linien
  const vCount = 18;
  for(let i=0;i<=vCount;i++){
    const t = i / vCount;
    const xBottom = botLeftX + (botRightX - botLeftX) * t;
    const xTop    = topLeftX + (topRightX - topLeftX) * t;

    ctx.beginPath();
    ctx.moveTo(xBottom, H);
    ctx.lineTo(xTop, horizon);
    ctx.stroke();
  }

  // Horizontale (Tiefe) Linien: quadratische Verteilung + animierter Offset
  const hCount = 22;
  for(let i=0;i<hCount;i++){
    // z in [0..1), mit laufendem Offset
    let z = (i / hCount + phase) % 1;
    // Perspektive: nah = unten, fern = nahe Horizon
    const p = z*z; // mehr Dichte am Horizont
    const y = Math.floor(horizon + (H - horizon) * (1 - (1 / (1 + 6*p)))); // â€ždepth curveâ€œ

    // Linke/rechte Kante an dieser Tiefe
    const edgeT = (y - horizon) / Math.max(1, (H - horizon));
    const leftX  = topLeftX  + (botLeftX  - topLeftX)  * edgeT;
    const rightX = topRightX + (botRightX - topRightX) * edgeT;

    ctx.beginPath();
    ctx.moveTo(leftX, y);
    ctx.lineTo(rightX, y);
    ctx.stroke();
  }

  // Optional: kleiner â€žVanishingâ€œ-Punkt
  ctx.fillStyle = 'rgba(0,0,0,0.35)';
  ctx.fillRect(vpX - 2*DPR, vpY - 2*DPR, 4*DPR, 4*DPR);
}

/* ================== Loader Timing ================== */
const START_DELAY_MS = 1000;
const INTRO_MS = 3500;   // âœ… 3â€“4 Sekunden => 3.5s
const FADEOUT_MS = 1700;
const EXTRA_MS = 300;

let rafId=null;

function startTransition(){
  sessionStorage.setItem("introPlayed","1");
  document.body.classList.add('fadeout');
  setTimeout(()=>{ window.location.href = INTRO_RETURN_URL; }, FADEOUT_MS + EXTRA_MS);
}

function startProgressAndGrid(){
  const bar = document.getElementById('bar');
  const start = performance.now();

  function frame(now){
    // Grid zeichnen
    drawGrid(now);

    // Progress
    const t = (now - start) / INTRO_MS;
    const clamped = Math.max(0, Math.min(1, t));

    // Arcade-Steps (80s)
    const steps = 32;
    const stepped = Math.floor(clamped * steps) / steps;

    bar.style.width = (stepped * 100).toFixed(2) + "%";

    if(clamped >= 1){
      bar.style.width = "100%";
      startTransition();
      return;
    }
    rafId = requestAnimationFrame(frame);
  }
  rafId = requestAnimationFrame(frame);
}

/* Skip-Button & Reduced-Motion */
(function setupSkipAndA11y(){
  const skipBtn = document.querySelector('.skip');
  function goNow(){
    try { sessionStorage.setItem("introPlayed","1"); } catch(e){}
    document.body.classList.add('fadeout');
    setTimeout(()=>location.replace(INTRO_RETURN_URL), 250);
  }
  if (skipBtn) skipBtn.addEventListener('click', goNow);

  try {
    if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      goNow();
      return;
    }
  } catch(e){}
})();

/* Start wie vorher */
setTimeout(() => {
  document.body.classList.add('ready');
  startProgressAndGrid();
}, START_DELAY_MS);
</script>
</body>
</html>
